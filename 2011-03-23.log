<span class="irc-date">[0:00]</span> <span class="irc-navy">* UberPinguin (~uber@gentoo/user/uberpinguin) Quit (Client Quit)</span><br />
<span class="irc-date">[0:00]</span> <span class="irc-green">* UberPinguin (~uber@gentoo/user/uberpinguin) has joined this channel.</span><br />
<span class="irc-date">[0:00]</span> <span class="irc-navy">* kalpik (~kalpik@unaffiliated/kalpik) Quit (Ping timeout: 248 seconds)</span><br />
<span class="irc-date">[0:07]</span> <span class="irc-green">* ciwrl is now known as ciwrl|nap</span><br />
<span class="irc-date">[0:08]</span> <span class="irc-black">&lt;Kaik541&gt; could the hawk possibly be the new sidekick device?</span><br />
<span class="irc-date">[0:09]</span> <span class="irc-navy">* designfears (~jayp@32.150.43.157) Quit (Ping timeout: 276 seconds)</span><br />
<span class="irc-date">[0:11]</span> <span class="irc-green">* designfears (~jayp@32.150.43.157) has joined this channel.</span><br />
<span class="irc-date">[0:14]</span> <span class="irc-green">* kalpik (~kalpik@unaffiliated/kalpik) has joined this channel.</span><br />
<span class="irc-date">[0:19]</span> <span class="irc-green">* mersault (~mersault@bas4-toronto02-1167988738.dsl.bell.ca) has joined this channel.</span><br />
<span class="irc-date">[0:41]</span> <span class="irc-black">&lt;Unhelpful&gt; aaaargh when i reverted MountServer i removed all my debug goodies :/</span><br />
<span class="irc-date">[0:43]</span> <span class="irc-black">&lt;techmik67&gt; cool! new dd-wrt fw!!</span><br />
<span class="irc-date">[0:44]</span> <span class="irc-brick">* Unhelpful still doesn't see what the big deal is about dd :P</span><br />
<span class="irc-date">[0:44]</span> <span class="irc-black">&lt;techmik67&gt; well its WAY better than the built in interface from linhsys/cisco</span><br />
<span class="irc-date">[0:45]</span> <span class="irc-black">&lt;techmik67&gt; imo</span><br />
<span class="irc-date">[0:54]</span> <span class="irc-black">&lt;techmik67&gt; atinm: if you want me to test any dock stuff, commit it and i'll pull from you to test in my car... =)</span><br />
<span class="irc-date">[0:55]</span> <span class="irc-black">&lt;atinm&gt; haven't done anything with it until I get a chance to look at it. at the moment it needs an App to work and I want to understand why</span><br />
<span class="irc-date">[0:55]</span> <span class="irc-black">&lt;Kaik541&gt; I think it needs an app the same way voodoo needs an app</span><br />
<span class="irc-date">[0:58]</span> <span class="irc-black">&lt;atinm&gt; yeah, voodoo we know can work without it if we implement the correct stuff in the kernel</span><br />
<span class="irc-date">[0:58]</span> <span class="irc-black">&lt;techmik67&gt; i need t run out to my car and test that... brb</span><br />
<span class="irc-date">[0:58]</span> <span class="irc-black">&lt;atinm&gt; and set up alsalib stuff. I think dock might be the same way</span><br />
<span class="irc-date">[0:58]</span> <span class="irc-brick">* Unhelpful uses open, and it's nice. :P</span><br />
<span class="irc-date">[0:59]</span> <span class="irc-black">&lt;Unhelpful&gt; *fyeah*, crashing vold.</span><br />
<span class="irc-date">[1:08]</span> <span class="irc-black">&lt;techmik67&gt; no good... am i supposed to have an icon in the app drawer for this redirector?</span><br />
<span class="irc-date">[1:12]</span> <span class="irc-black">&lt;Kaik541&gt; no idea, never used it</span><br />
<span class="irc-date">[1:13]</span> <span class="irc-black">&lt;techmik67&gt; gonna update my router.... brb</span><br />
<span class="irc-date">[1:18]</span> <span class="irc-navy">* techmik67 (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) Quit (Remote host closed the connection)</span><br />
<span class="irc-date">[1:19]</span> <span class="irc-navy">* techmik_laptop (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) Quit (Quit: Konversation terminated!)</span><br />
<span class="irc-date">[1:42]</span> <span class="irc-green">* techmik_laptop (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) has joined this channel.</span><br />
<span class="irc-date">[1:52]</span> <span class="irc-green">* techmik67 (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) has joined this channel.</span><br />
<span class="irc-date">[2:01]</span> <span class="irc-green">* atinm is now known as atinm|night</span><br />
<span class="irc-date">[2:11]</span> <span class="irc-black">&lt;Unhelpful&gt; well crap, how *are* you supposed to iterate backwards?</span><br />
<span class="irc-date">[2:27]</span> <span class="irc-black">&lt;Unhelpful&gt; unmount working. mount less so.</span><br />
<span class="irc-date">[2:28]</span> <span class="irc-black">&lt;techmik67&gt; progress is progress</span><br />
<span class="irc-date">[2:29]</span> <span class="irc-black">&lt;Unhelpful&gt; it iterates and checks the lower mountpoints, i just don't know why it's not, you know, mounting them.</span><br />
<span class="irc-date">[2:30]</span> <span class="irc-navy">* designfears (~jayp@32.150.43.157) Quit (Ping timeout: 276 seconds)</span><br />
<span class="irc-date">[2:34]</span> <span class="irc-brick">* techmik67 wonders if i found something that relates to camera orientation being wrong?</span><br />
<span class="irc-date">[2:36]</span> <span class="irc-black">&lt;techmik67&gt; device/samsung/common/aries/libcamera/SecCameraHWInterface.cpp       lines1518-1529</span><br />
<span class="irc-date">[2:57]</span> <span class="irc-black">&lt;Unhelpful&gt; still-on-that-eh? ;)</span><br />
<span class="irc-date">[2:58]</span> <span class="irc-black">&lt;techmik67&gt; looking at anything i might be able to figure in english....</span><br />
<span class="irc-date">[2:58]</span> <span class="irc-black">&lt;techmik67&gt; as opposed to obscure (to me) code =P</span><br />
<span class="irc-date">[2:58]</span> <span class="irc-brick">* techmik67 is bored..... wants to do, test, or flash something....</span><br />
<span class="irc-date">[3:01]</span> <span class="irc-black">&lt;Unhelpful&gt; i'm working on /sdcard/external_sd and getting somewhere. i'll probably have stuff pushed up to test branches later. ;)</span><br />
<span class="irc-date">[3:01]</span> <span class="irc-black">&lt;techmik67&gt; woohoo!!!</span><br />
<span class="irc-date">[3:01]</span> <span class="irc-black">&lt;techmik67&gt; now that i am learning git i want to be branching and  tedting constantly =)</span><br />
<span class="irc-date">[3:01]</span> <span class="irc-black">&lt;techmik67&gt; testing*</span><br />
<span class="irc-date">[3:07]</span> <span class="irc-navy">* mxracer_linux (~mxracer@adsl-210-120-208.clt.bellsouth.net) Quit (Read error: Connection reset by peer)</span><br />
<span class="irc-date">[3:16]</span> <span class="irc-black">&lt;Unhelpful&gt; bluuuuuh almost there on mount-point creation.</span><br />
<span class="irc-date">[3:16]</span> <span class="irc-black">&lt;Kaik541&gt; I have faith in you</span><br />
<span class="irc-date">[3:16]</span> <span class="irc-black">&lt;techmik67&gt; me too =)</span><br />
<span class="irc-date">[3:23]</span> <span class="irc-green">* mxracer_linux (~mxracer@adsl-1-144-236.clt.bellsouth.net) has joined this channel.</span><br />
<span class="irc-date">[3:24]</span> <span class="irc-black">&lt;Kaik541&gt; I'm actually fairly impressed... most of the more recognizable apps are available on amazon's app store</span><br />
<span class="irc-date">[3:28]</span> <span class="irc-navy">* mersault (~mersault@bas4-toronto02-1167988738.dsl.bell.ca) Quit (Quit: mersault)</span><br />
<span class="irc-date">[3:32]</span> <span class="irc-black">&lt;Unhelpful&gt; implementing mkdir -p in C semi-sucks :P</span><br />
<span class="irc-date">[3:36]</span> <span class="irc-black">&lt;Kaik541&gt; Unhelpful, coolya|away, codeworkx, atinm|night... anyone: <a href="http://www.youtube.com/watch?v=C0zWLcb9pWs">http://www.youtube.com/watch?v=C0zWLcb9pWs</a> ideas?</span><br />
<span class="irc-date">[3:39]</span> <span class="irc-black">&lt;Unhelpful&gt; the issue is what exactly? bad colors? rendereffect not following settings?</span><br />
<span class="irc-date">[3:46]</span> <span class="irc-black">&lt;Unhelpful&gt; hokay: you need <a href="https://github.com/atinm/android_packages_apps_Settings/tree/sdcard_test">https://github.com/atinm/android_packages_apps_Settings/tree/sdcard_test</a> and <a href="https://github.com/Unhelpful/android_system_vold/tree/sdcard_test">https://github.com/Unhelpful/android_system_vold/tree/sdcard_test</a> and you also need to set ro.removablemounts=/mnt/sdcard/external_sd and make the external sd mountpoint /mnt/sdcard/external_sd in /system/etc/vold.fstab</span><br />
<span class="irc-date">[3:47]</span> <span class="irc-black">&lt;Unhelpful&gt; and then you can do fun things like unmount internal (should force external unmount), mount external (should force internal mount), remove /mnt/sdcard/external_sd while external is unmounted, and then mount external... etc. ;)</span><br />
<span class="irc-date">[3:49]</span> <span class="irc-black">&lt;techmik67&gt; ok, walking dogs, then will play =)</span><br />
<span class="irc-date">[3:50]</span> <span class="irc-navy">* designfears_ (~df@cpe-184-57-163-79.cinci.res.rr.com) Quit (Ping timeout: 255 seconds)</span><br />
<span class="irc-date">[3:55]</span> <span class="irc-black">&lt;Kaik541&gt; Unhelpful, even in recovery mode everything is tainted blue for him</span><br />
<span class="irc-date">[3:56]</span> <span class="irc-black">&lt;Kaik541&gt; even (numerous) fresh installs end up everything all blue</span><br />
<span class="irc-date">[3:57]</span> <span class="irc-black">&lt;Kaik541&gt; had him wipe cache, factory reset, etc... still blue</span><br />
<span class="irc-date">[3:58]</span> <span class="irc-black">&lt;Kaik541&gt; and if you watch, even when he clicks the red filter, the blue filter is still on</span><br />
<span class="irc-date">[4:13]</span> <span class="irc-black">&lt;Unhelpful&gt; what about flashing a stock firmware?</span><br />
<span class="irc-date">[4:14]</span> <span class="irc-black">&lt;Kaik541&gt; he didn't say, but he said he's gone back (and I assume it's fine) and that the other CWM was green</span><br />
<span class="irc-date">[4:14]</span> <span class="irc-black">&lt;Kaik541&gt; but with this, recovery looks pinkish instead of orange</span><br />
<span class="irc-date">[4:15]</span> <span class="irc-green">* mersault (~mersault@bas4-toronto02-1167988738.dsl.bell.ca) has joined this channel.</span><br />
<span class="irc-date">[4:15]</span> <span class="irc-black">&lt;Unhelpful&gt; yeah, i have no clue.</span><br />
<span class="irc-date">[4:17]</span> <span class="irc-navy">* mersault (~mersault@bas4-toronto02-1167988738.dsl.bell.ca) Quit (Client Quit)</span><br />
<span class="irc-date">[4:22]</span> <span class="irc-black">&lt;techmik67&gt; ok, i cant find 1 thing.... ro.removeablemounts is where, again?</span><br />
<span class="irc-date">[4:23]</span> <span class="irc-black">&lt;techmik67&gt; build.prop?</span><br />
<span class="irc-date">[4:24]</span> <span class="irc-black">&lt;Unhelpful&gt; should be, i *thought* everything but settings was already pushed up at least to teamhacksung.</span><br />
<span class="irc-date">[4:30]</span> <span class="irc-black">&lt;techmik67&gt; ah.... cyanogen_captivate.mk ........ ro.removeablemounts=/mnt/emmc</span><br />
<span class="irc-date">[4:30]</span> <span class="irc-black">&lt;Unhelpful&gt; yes, but you can just edit it live on your device, as well ;)</span><br />
<span class="irc-date">[4:31]</span> <span class="irc-black">&lt;techmik67&gt; nah, i'm baranching =)</span><br />
<span class="irc-date">[4:31]</span> <span class="irc-black">&lt;techmik67&gt; branching*</span><br />
<span class="irc-date">[4:57]</span> <span class="irc-navy">* techmik_laptop (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) Quit (Quit: Konversation terminated!)</span><br />
<span class="irc-date">[4:57]</span> <span class="irc-green">* techmik_laptop (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) has joined this channel.</span><br />
<span class="irc-date">[5:08]</span> <span class="irc-black">&lt;techmik_laptop&gt; i wonder if my laptop can take a better processor.....</span><br />
<span class="irc-date">[5:08]</span> <span class="irc-black">&lt;techmik_laptop&gt; to compile faster</span><br />
<span class="irc-date">[5:10]</span> <span class="irc-green">* crypta1 (~KP@port-90345.pppoe.wtnet.de) has joined this channel.</span><br />
<span class="irc-date">[5:11]</span> <span class="irc-navy">* crypta (~KP@port-18042.pppoe.wtnet.de) Quit (Ping timeout: 252 seconds)</span><br />
<span class="irc-date">[5:14]</span> <span class="irc-black">&lt;Kaik541&gt; replacing processors on a laptop is a fucking bitch</span><br />
<span class="irc-date">[5:17]</span> <span class="irc-black">&lt;techmik_laptop&gt; oh, i think i'd let compusa do it..... if they'd do it while i wait =)</span><br />
<span class="irc-date">[5:19]</span> <span class="irc-black">&lt;techmik_laptop&gt; how can i figue out my socket type? any linux cmd that'll help, or do i need to boot windows and get som info from cpuz and then google?</span><br />
<span class="irc-date">[5:21]</span> <span class="irc-black">&lt;techmik_laptop&gt; got it</span><br />
<span class="irc-date">[5:21]</span> <span class="irc-black">&lt;techmik_laptop&gt; cat /proc/cpuinfo</span><br />
<span class="irc-date">[5:23]</span> <span class="irc-black">&lt;techmik_laptop&gt; athlon 2 dualcore m300, 800mhz, 512 cache,</span><br />
<span class="irc-date">[5:34]</span> <span class="irc-black">&lt;techmik_laptop&gt; ok, testing and rebooting..... brb</span><br />
<span class="irc-date">[5:34]</span> <span class="irc-navy">* techmik_laptop (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) Quit (Remote host closed the connection)</span><br />
<span class="irc-date">[5:40]</span> <span class="irc-brick">* Unhelpful hugs his SB i7 ;)</span><br />
<span class="irc-date">[5:53]</span> <span class="irc-green">* techmik_laptop (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) has joined this channel.</span><br />
<span class="irc-date">[5:53]</span> <span class="irc-black">&lt;techmik_laptop&gt; been a while since i was booted into windows on this laptop =)</span><br />
<span class="irc-date">[6:00]</span> <span class="irc-navy">* kalpik (~kalpik@unaffiliated/kalpik) Quit (Ping timeout: 252 seconds)</span><br />
<span class="irc-date">[6:04]</span> <span class="irc-black">&lt;techmik_laptop&gt; ok, i have a socket S1 (638) package processor</span><br />
<span class="irc-date">[6:16]</span> <span class="irc-green">* kalpik (~kalpik@unaffiliated/kalpik) has joined this channel.</span><br />
<span class="irc-date">[6:17]</span> <span class="irc-green">* evaluate (~cristi@unaffiliated/evaluate) has joined this channel.</span><br />
<span class="irc-date">[6:18]</span> <span class="irc-black">&lt;evaluate&gt; morning</span><br />
<span class="irc-date">[6:19]</span> <span class="irc-black">&lt;Unhelpful&gt; evaluate: &lt;Unhelpful&gt; hokay: you need <a href="https://github.com/atinm/android_packages_apps_Settings/tree/sdcard_test">https://github.com/atinm/android_packages_apps_Settings/tree/sdcard_test</a> and <a href="https://github.com/Unhelpful/android_system_vold/tree/sdcard_test">https://github.com/Unhelpful/android_system_vold/tree/sdcard_test</a> and you also need to set ro.removablemounts=/mnt/sdcard/external_sd and make the external sd mountpoint /mnt/sdcard/external_sd in /system/etc/vold.fstab  :)</span><br />
<span class="irc-date">[6:19]</span> <span class="irc-black">&lt;Unhelpful&gt; from a while ago. ;)</span><br />
<span class="irc-date">[6:20]</span> <span class="irc-black">&lt;evaluate&gt; ok, I have just a bit of work to do and then I'll take a look at it.</span><br />
<span class="irc-date">[6:22]</span> <span class="irc-black">&lt;uberushaximus&gt; <a href="http://www.youtube.com/watch?v=rTUwqxHpXMY">http://www.youtube.com/watch?v=rTUwqxHpXMY</a></span><br />
<span class="irc-date">[6:31]</span> <span class="irc-navy">* techmik_laptop (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) Quit (Remote host closed the connection)</span><br />
<span class="irc-date">[6:34]</span> <span class="irc-black">&lt;Unhelpful&gt; it would be nice not to rely on the vold.fstab entries being pre-sorted, but fixing that will be inconvenient - probably the easiest way is to add an insort method to android::List and use that instead of push_back</span><br />
<span class="irc-date">[6:36]</span> <span class="irc-green">* techmik_laptop (~techmik@c-76-109-173-83.hsd1.fl.comcast.net) has joined this channel.</span><br />
<span class="irc-date">[6:43]</span> <span class="irc-black">&lt;evaluate&gt; ok, let me have a look at this. as far as I can see, there are no changes to the settings app, right?</span><br />
<span class="irc-date">[6:45]</span> <span class="irc-black">&lt;Unhelpful&gt; no new ones, no :)</span><br />
<span class="irc-date">[6:48]</span> <span class="irc-black">&lt;evaluate&gt; good. let me build this so I can see what's going on</span><br />
<span class="irc-date">[6:50]</span> <span class="irc-black">&lt;Unhelpful&gt; it's not too exciting. if you mount external at /mnt/sdcard/external_sd, it will be unmounted before internal is, and internal will be mounted before external is.</span><br />
<span class="irc-date">[6:52]</span> <span class="irc-black">&lt;evaluate&gt; but you said there's an error, right?</span><br />
<span class="irc-date">[6:53]</span> <span class="irc-black">&lt;evaluate&gt; or did you manage to fix it?</span><br />
<span class="irc-date">[6:55]</span> <span class="irc-black">&lt;Unhelpful&gt; everything's fine now, as far as i can tell. storage menu still seems to lag behind actual state sometimes, though.</span><br />
<span class="irc-date">[7:01]</span> <span class="irc-black">&lt;evaluate&gt; Unhelpful, btw, did you send your build system changes to CM?</span><br />
<span class="irc-date">[7:02]</span> <span class="irc-black">&lt;Unhelpful&gt; the only gotcha right now is you can deliberately break it if you place deeper mountpoints ahead of shallower ones in vold.fstab. i think ordering volumes as they're read in should be *fairly* easy.</span><br />
<span class="irc-date">[7:02]</span> <span class="irc-black">&lt;Unhelpful&gt; i didn't yet :/</span><br />
<span class="irc-date">[7:02]</span> <span class="irc-black">&lt;evaluate&gt; what are you waiting for? :-p</span><br />
<span class="irc-date">[7:03]</span> <span class="irc-black">&lt;Unhelpful&gt; time, mostly. :P</span><br />
<span class="irc-date">[7:07]</span> <span class="irc-black">&lt;techmik_laptop&gt; thi slaptop wont even take a good cpu =(</span><br />
<span class="irc-date">[7:11]</span> <span class="irc-black">&lt;evaluate&gt; Unhelpful, <a href="http://pastebin.com/mF8gmPaY">http://pastebin.com/mF8gmPaY</a></span><br />
<span class="irc-date">[7:11]</span> <span class="irc-black">&lt;evaluate&gt; it won't mount the external sd</span><br />
<span class="irc-date">[7:12]</span> <span class="irc-black">&lt;evaluate&gt; actually, I think the problem might be with the settings app</span><br />
<span class="irc-date">[7:13]</span> <span class="irc-black">&lt;Unhelpful&gt; if you set mDebug in Volume.cpp and VolumeManager.cpp to true, you'll get some more debug output</span><br />
<span class="irc-date">[7:14]</span> <span class="irc-black">&lt;Unhelpful&gt; i don't get any errors here :/</span><br />
<span class="irc-date">[7:17]</span> <span class="irc-black">&lt;evaluate&gt; any idea where the 'statfs' prototype is defined?</span><br />
<span class="irc-date">[7:18]</span> <span class="irc-black">&lt;evaluate&gt; I'd like to have a look at the errno 13 and what it means exactly...</span><br />
<span class="irc-date">[7:19]</span> <span class="irc-black">&lt;evaluate&gt; Unhelpful, btw, does it show total space and available space correctly for you in Settings -&gt; Storage?</span><br />
<span class="irc-date">[7:19]</span> <span class="irc-black">&lt;Unhelpful&gt; it doesn't seem to... any idea why?</span><br />
<span class="irc-date">[7:19]</span> <span class="irc-black">&lt;Unhelpful&gt; um, errno meanings aren't per-call :)</span><br />
<span class="irc-date">[7:20]</span> <span class="irc-black">&lt;evaluate&gt; well, the settings app calls statfs to find out the total and available space on the card</span><br />
<span class="irc-date">[7:20]</span> <span class="irc-black">&lt;evaluate&gt; and that call apparently fails</span><br />
<span class="irc-date">[7:21]</span> <span class="irc-black">&lt;evaluate&gt; and what do you mean they aren't per call? Isn't there a table with like: 1 means the mountpoint isn't available, 2 means it isn't readable, 3 means etc. ?</span><br />
<span class="irc-date">[7:21]</span> <span class="irc-black">&lt;Unhelpful&gt; erm, nope.</span><br />
<span class="irc-date">[7:22]</span> <span class="irc-black">&lt;evaluate&gt; what does that 13 stand for then? :-p</span><br />
<span class="irc-date">[7:23]</span> <span class="irc-black">&lt;Unhelpful&gt; you could find out fairly easily with strerror ;)</span><br />
<span class="irc-date">[7:23]</span> <span class="irc-black">&lt;Unhelpful&gt; look in bionic/libc/include/sys/_errdefs.h</span><br />
<span class="irc-date">[7:23]</span> <span class="irc-green">* stickpin (~stickpin@80.178.24.208.adsl.012.net.il) has joined this channel.</span><br />
<span class="irc-date">[7:24]</span> <span class="irc-black">&lt;Unhelpful&gt; permission denied :(</span><br />
<span class="irc-date">[7:25]</span> <span class="irc-black">&lt;Unhelpful&gt; the numbers have specific meanings, they're just not specific to any one library function. they're generic, so while they're not always *perfectly descriptive you can always use strerror to map them to hopefully-meaningful text errors</span><br />
<span class="irc-date">[7:26]</span> <span class="irc-navy">* birdman (~Steven@24.246.130.106) Quit (Ping timeout: 255 seconds)</span><br />
<span class="irc-date">[7:26]</span> <span class="irc-black">&lt;Unhelpful&gt; hrm, it certainly looks to me like both sdcards have the same permissions - this makes sense since iirc you said that mount options are hardcoded, and permissions for vfat are all in mount options.</span><br />
<span class="irc-date">[7:28]</span> <span class="irc-black">&lt;evaluate&gt; yeah, you can see the permissions in Fat.cpp</span><br />
<span class="irc-date">[7:28]</span> <span class="irc-black">&lt;evaluate&gt; Fat::mount I think it was</span><br />
<span class="irc-date">[7:29]</span> <span class="irc-black">&lt;evaluate&gt; I don't have much experience with mountflags, but maybe you can spot if there's anything wrong with them</span><br />
<span class="irc-date">[7:29]</span> <span class="irc-black">&lt;evaluate&gt; Fat::doMount actually...</span><br />
<span class="irc-date">[7:31]</span> <span class="irc-black">&lt;evaluate&gt; actually, now that I look at it, the IDs and masks aren't hardcoded, they're passed to the mount function...</span><br />
<span class="irc-date">[7:32]</span> <span class="irc-black">&lt;Unhelpful&gt; interesting. mine both have the same IDs, though.</span><br />
<span class="irc-date">[7:33]</span> <span class="irc-black">&lt;evaluate&gt; I think that's normal, isn't it?</span><br />
<span class="irc-date">[7:34]</span> <span class="irc-black">&lt;Unhelpful&gt; they ought to, the gid is used to limit access to apps with sdcard access permissions.</span><br />
<span class="irc-date">[7:35]</span> <span class="irc-black">&lt;evaluate&gt; all masks seem to be set to '0702' on mine</span><br />
<span class="irc-date">[7:35]</span> <span class="irc-black">&lt;Unhelpful&gt; right, FAT can't store unix permissions, they're set at mount.</span><br />
<span class="irc-date">[7:37]</span> <span class="irc-black">&lt;Unhelpful&gt; viewing storage w/ extsd mounted gives me th same error. bah.</span><br />
<span class="irc-date">[7:38]</span> <span class="irc-black">&lt;evaluate&gt; hmm</span><br />
<span class="irc-date">[7:39]</span> <span class="irc-black">&lt;evaluate&gt; could it be that statfs is run as 'system' and since /mnt/sdcard/external_sd isn't world readable it can't access it?</span><br />
<span class="irc-date">[7:39]</span> <span class="irc-black">&lt;evaluate&gt; although I see that /mnt/sdcard has the same permissions... :-\</span><br />
<span class="irc-date">[7:40]</span> <span class="irc-black">&lt;Unhelpful&gt; i'm not sure what permissions statfs actually needs - it's reading properties of the filesystem, not of any file.</span><br />
<span class="irc-date">[7:42]</span> <span class="irc-black">&lt;Unhelpful&gt; hrm, yes, actually, it might be the problem. :)</span><br />
<span class="irc-date">[7:43]</span> <span class="irc-black">&lt;evaluate&gt; what exactly? The permissions?</span><br />
<span class="irc-date">[7:43]</span> <span class="irc-green">* birdman (~Steven@124.sub-75-201-246.myvzw.com) has joined this channel.</span><br />
<span class="irc-date">[7:43]</span> <span class="irc-black">&lt;Unhelpful&gt; yes. in a very funny way. :)</span><br />
<span class="irc-date">[7:43]</span> <span class="irc-black">&lt;evaluate&gt; I'm not sure I understand...</span><br />
<span class="irc-date">[7:44]</span> <span class="irc-black">&lt;Unhelpful&gt; it fails because it's *under* a directory for which system does not have search access.</span><br />
<span class="irc-date">[7:44]</span> <span class="irc-black">&lt;Unhelpful&gt; per statfs man page: EACCES (statfs()) Search permission is denied for a component of the path prefix of path.  (See also path_resolution(7).)</span><br />
<span class="irc-date">[7:45]</span> <span class="irc-black">&lt;evaluate&gt; so we need to mount /mnt/sdcard with another mask then?</span><br />
<span class="irc-date">[7:45]</span> <span class="irc-black">&lt;evaluate&gt; Wouldn't that imply some security risks?</span><br />
<span class="irc-date">[7:46]</span> <span class="irc-black">&lt;Unhelpful&gt; or use different permissions in things that need to call statfs.</span><br />
<span class="irc-date">[7:47]</span> <span class="irc-black">&lt;evaluate&gt; wouldn't that be a lot of trouble? I'd guess many things would need access to statfs...</span><br />
<span class="irc-date">[7:48]</span> <span class="irc-brick">* Unhelpful wonders how samsung dealt w/ this issue...</span><br />
<span class="irc-date">[7:48]</span> <span class="irc-black">&lt;evaluate&gt; for example the camera, iirc it shows the number of photos you can still take until your memory is full, so somehow it needs to know the available space, I'd guess it does that through statfs</span><br />
<span class="irc-date">[7:48]</span> <span class="irc-black">&lt;evaluate&gt; and there may be many more apps that need that</span><br />
<span class="irc-date">[7:49]</span> <span class="irc-black">&lt;Unhelpful&gt; any app that actually reads/writes files in the sdcard should be fine, though.</span><br />
<span class="irc-date">[7:49]</span> <span class="irc-black">&lt;Unhelpful&gt; the storage app is an odd exception because it *only* displays statistics.</span><br />
<span class="irc-date">[7:49]</span> <span class="irc-black">&lt;evaluate&gt; yes, but the settings app looks awful :-p</span><br />
<span class="irc-date">[7:50]</span> <span class="irc-black">&lt;Unhelpful&gt; hrm, but, actually, sdcard and external_sd both have r-x for other - so *anything* should be able to read and list contents, you only need special perms for write.</span><br />
<span class="irc-date">[7:50]</span> <span class="irc-black">&lt;Unhelpful&gt; wtf.</span><br />
<span class="irc-date">[7:52]</span> <span class="irc-black">&lt;evaluate&gt; yeah, I typo'd, I meant to say 'user' readable. That means if statfs runs as 'system', it won't be able to access it, will it?</span><br />
<span class="irc-date">[7:53]</span> <span class="irc-black">&lt;Unhelpful&gt; erm, but, that's the funny thing, shouldn't the other r-x perms suffice?</span><br />
<span class="irc-date">[7:53]</span> <span class="irc-black">&lt;Unhelpful&gt; apparently not!</span><br />
<span class="irc-date">[7:53]</span> <span class="irc-black">&lt;evaluate&gt; well, apparently not: <a href="http://pastebin.com/SCXR1zFf">http://pastebin.com/SCXR1zFf</a></span><br />
<span class="irc-date">[7:54]</span> <span class="irc-black">&lt;evaluate&gt; if statfs runs as user 'system' that might be the problem...</span><br />
<span class="irc-date">[7:56]</span> <span class="irc-black">&lt;evaluate&gt; too bad we don't have someone with a stock rom to see what the perms of /mnt/sdcard are, I'd be curios if they've set them to user readable...</span><br />
<span class="irc-date">[7:58]</span> <span class="irc-black">&lt;Unhelpful&gt; i think it's very odd that *only* the system user would be denied read/browse access.</span><br />
<span class="irc-date">[7:58]</span> <span class="irc-black">&lt;evaluate&gt; yeah, not sure what the reason is...</span><br />
<span class="irc-date">[7:58]</span> <span class="irc-black">&lt;evaluate&gt; I don't think it would be wise to change that though...</span><br />
<span class="irc-date">[7:59]</span> <span class="irc-black">&lt;evaluate&gt; at least not until we know what it implies...</span><br />
<span class="irc-date">[7:59]</span> <span class="irc-navy">* birdman (~Steven@124.sub-75-201-246.myvzw.com) Quit (Ping timeout: 255 seconds)</span><br />
<span class="irc-date">[7:59]</span> <span class="irc-black">&lt;Unhelpful&gt; and i don't think it was wise to *do* it that way... but i'm curious as to what the drive was.</span><br />
<span class="irc-date">[7:59]</span> <span class="irc-black">&lt;Unhelpful&gt; i can tell you exactly what changing it would imply, that system could read files on the sdcard. :)</span><br />
<span class="irc-date">[8:03]</span> <span class="irc-black">&lt;Unhelpful&gt; ah! i think i've found why!</span><br />
<span class="irc-date">[8:03]</span> <span class="irc-black">&lt;Unhelpful&gt; <a href="http://android.bigresource.com/Track/android-YfvGLH39z/">http://android.bigresource.com/Track/android-YfvGLH39z/</a></span><br />
<span class="irc-date">[8:04]</span> <span class="irc-black">&lt;Unhelpful&gt; it would seem we could resolve this by granting only browse and not read. system processes would still not be able to hold fds on sdcard.</span><br />
<span class="irc-date">[8:07]</span> <span class="irc-black">&lt;evaluate&gt; ok, do you know where the permissions are stored?</span><br />
<span class="irc-date">[8:07]</span> <span class="irc-black">&lt;Unhelpful&gt; ...Volume.cpp ;)</span><br />
<span class="irc-date">[8:08]</span> <span class="irc-black">&lt;Unhelpful&gt; we could also ask somebody w/ a stock ROM.</span><br />
<span class="irc-date">[8:09]</span> <span class="irc-black">&lt;evaluate&gt; well, do you know anyone with a stock rom? I don't... :-p</span><br />
<span class="irc-date">[8:10]</span> <span class="irc-black">&lt;Unhelpful&gt; change the "0702" in the call to Fat::doMount in Volume.cpp to 0602. this will grant only browse permissions to system. just pushed the new vold and remounted, perms are changed and i get space info again.</span><br />
<span class="irc-date">[8:11]</span> <span class="irc-black">&lt;evaluate&gt; you mean line 377 in Volume.cpp, right?</span><br />
<span class="irc-date">[8:12]</span> <span class="irc-black">&lt;Unhelpful&gt; ayup.</span><br />
<span class="irc-date">[8:13]</span> <span class="irc-black">&lt;Unhelpful&gt; a filesystem insid a filesystem... &lt;insert pun on "inception" here&gt;</span><br />
<span class="irc-date">[8:14]</span> <span class="irc-black">&lt;evaluate&gt; lol</span><br />
<span class="irc-date">[8:14]</span> <span class="irc-black">&lt;evaluate&gt; if the first FS 'dies', the second gets trapped in limbo</span><br />
<span class="irc-date">[8:16]</span> <span class="irc-black">&lt;evaluate&gt; ok, this looks good to me, I'd say you can make a test version and put it up on xda so we get some more feedback...</span><br />
<span class="irc-date">[8:17]</span> <span class="irc-black">&lt;evaluate&gt; not sure if this will get accepted in upstream though...</span><br />
<span class="irc-date">[8:19]</span> <span class="irc-black">&lt;Unhelpful&gt; yeah. i wonder what a "proper" solution would be. :/</span><br />
<span class="irc-date">[8:20]</span> <span class="irc-black">&lt;evaluate&gt; well, since we have to think about the future, and since in the future devices have more than 2 cards actually, I'd say a proper solution would be to 'teach' each app to work with ro.additionalmounts and ro.removablemounts, since those can hold multiple devices...</span><br />
<span class="irc-date">[8:21]</span> <span class="irc-black">&lt;Unhelpful&gt; probably, yes.</span><br />
<span class="irc-date">[8:21]</span> <span class="irc-black">&lt;evaluate&gt; I'd even eliminate EXTERNAL_STORAGE for good</span><br />
<span class="irc-date">[8:22]</span> <span class="irc-black">&lt;evaluate&gt; and make apps work ONLY with ro.additionalmounts and ro.removablemounts</span><br />
<span class="irc-date">[8:23]</span> <span class="irc-black">&lt;evaluate&gt; and then make the apps that are only interested in the 'primary' storage device read the first mountpoint in ro.additionalmounts or ro.removablemounts</span><br />
<span class="irc-date">[8:23]</span> <span class="irc-black">&lt;evaluate&gt; this would give them much more power and make everything much easier</span><br />
<span class="irc-date">[8:23]</span> <span class="irc-black">&lt;evaluate&gt; you would just have to put all devices in the appropriate flag and make sure that the one that you consider as being the primary storage is in the first place</span><br />
<span class="irc-date">[8:24]</span> <span class="irc-black">&lt;evaluate&gt; and you're all sorted, no more awkward EXTERNAL_STORAGE and PHONE_STORAGE variables that either don't get read or are totally misleading</span><br />
<span class="irc-date">[8:26]</span> <span class="irc-black">&lt;Unhelpful&gt; i still don't see any reason to have *two* properties.</span><br />
<span class="irc-date">[8:26]</span> <span class="irc-black">&lt;evaluate&gt; I thought of the tablets for example</span><br />
<span class="irc-date">[8:26]</span> <span class="irc-black">&lt;evaluate&gt; I'd guess they might come with internal hard drives for example</span><br />
<span class="irc-date">[8:26]</span> <span class="irc-black">&lt;Unhelpful&gt; ...i don't follow.</span><br />
<span class="irc-date">[8:26]</span> <span class="irc-black">&lt;Kaik541&gt; Unhelpful, I think that's what they said too... they want evaluate to expand additional mounts, not add a "removeable mounts" option</span><br />
<span class="irc-date">[8:26]</span> <span class="irc-black">&lt;Kaik541&gt; they = review people</span><br />
<span class="irc-date">[8:27]</span> <span class="irc-black">&lt;Unhelpful&gt; internal hard drive is different from internal SD how?</span><br />
<span class="irc-date">[8:27]</span> <span class="irc-black">&lt;evaluate&gt; and you probably wouldn't want to unmount/format those, since they might contain important data or some stuff...</span><br />
<span class="irc-date">[8:27]</span> <span class="irc-black">&lt;Kaik541&gt; it's just like unmounting /formatting our internal sd =/</span><br />
<span class="irc-date">[8:27]</span> <span class="irc-black">&lt;Kaik541&gt; they'd keep a proteted partition the end user (without root) can't modify</span><br />
<span class="irc-date">[8:28]</span> <span class="irc-black">&lt;Unhelpful&gt; why, any app w/ sdcard write could wipe the contents, anyway.</span><br />
<span class="irc-date">[8:29]</span> <span class="irc-black">&lt;evaluate&gt; I'm not sure how to explain it. I thought there might be devices that have internal storage that isn't a system storage (the reason why it gets put under ro.additionalmounts) yet still contains important data, so that you can't unmount/format it</span><br />
<span class="irc-date">[8:29]</span> <span class="irc-black">&lt;evaluate&gt; maybe I'm just talking bullshit here...</span><br />
<span class="irc-date">[8:30]</span> <span class="irc-black">&lt;Kaik541&gt; I feel like that's a very specific/rare implentation</span><br />
<span class="irc-date">[8:30]</span> <span class="irc-black">&lt;Kaik541&gt; and if it ever crops up, they can "fix" it :P</span><br />
<span class="irc-date">[8:30]</span> <span class="irc-black">&lt;Unhelpful&gt; i think *if* that ever happens somebody can worry about it then.</span><br />
<span class="irc-date">[8:31]</span> <span class="irc-black">&lt;Unhelpful&gt; and if it's never supposed to unmount or formate i would just mount it in init.rc and not tell vold it exists. ;)</span><br />
<span class="irc-date">[8:32]</span> <span class="irc-black">&lt;Unhelpful&gt; if anybody ever answered questions on cyanogenmod-dev we could ask ;)</span><br />
<span class="irc-date">[8:34]</span> <span class="irc-black">&lt;evaluate&gt; yeah, I think I'll just wait to see what they say on the patch review and then we can work from there</span><br />
<span class="irc-date">[8:38]</span> <span class="irc-black">&lt;Kaik541&gt; if they ever answer &gt;_&lt;</span><br />
<span class="irc-date">[8:38]</span> <span class="irc-black">&lt;Kaik541&gt; actually</span><br />
<span class="irc-date">[8:38]</span> <span class="irc-black">&lt;Kaik541&gt; based on what he said, it sounds exactly like he wants you to use additional mounts</span><br />
<span class="irc-date">[8:38]</span> <span class="irc-black">&lt;Kaik541&gt; My point was that additionalmounts are already *able* to be unmounted, as they are for UMS - the system does not depend on them always being mounted.</span><br />
<span class="irc-date">[8:45]</span> <span class="irc-black">&lt;evaluate&gt; Well, I'd just like to hear that from a dev that can make such decisions</span><br />
<span class="irc-date">[8:46]</span> <span class="irc-black">&lt;evaluate&gt; I wouldn't want to work on a second patch that applies the options to additionalmounts just to hear afterwards that they would've preffered removablemounts...</span><br />
<span class="irc-date">[8:46]</span> <span class="irc-black">&lt;evaluate&gt; preferred*</span><br />
<span class="irc-date">[8:52]</span> <span class="irc-green">* birdman (~Steven@124.sub-75-201-246.myvzw.com) has joined this channel.</span><br />
<span class="irc-date">[8:59]</span> <span class="irc-black">&lt;evaluate&gt; I think we will need to modify vold in the future so that it is able to use a normal linux fstab file, and so that it can mount all partitions on a device, not just the first one...</span><br />
